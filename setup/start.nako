# ------------------------------------------------------
#
# 実行ファイルに変換してルートに配置する
#
# ------------------------------------------------------
# 実行方式を gnako にすること
# ------------------------------------------------------
母艦のタイトルは『日本語プログラミング言語「なでしこ3」Node.js版』
母艦のW=500
母艦のH=400
# ------------------------------------------------------
# setup でも root でもどちらでも動くようにパスを修正
BASEDIR=母艦パス
BASE=MID(BASEDIR,1,文字数(BASEDIR)-1)からファイル名抽出
もし、BASE=「setup」ならば
　　BASEDIR=MID(BASEDIR,1,文字数(BASEDIR)-1)からパス抽出。
# ------------------------------------------------------
# パスの設定
NODE_DIR=「{BASEDIR}nodejs\」
MOD_DIR=「{BASEDIR}node_modules\」
SETUP_DIR=「{BASEDIR}setup\」
BIN_DIR=「{BASEDIR}bin\」
NADESIKO3_DIR=「{MOD_DIR}nadesiko3\」
# ------------------------------------------------------
# node.jsのインストールチェック
NODE_EXE = 「{NODE_DIR}node.exe」
ZIP_EXE = 「{BIN_DIR}7z.exe」
CNAKO3 = 「"{NODE_EXE}" "{NADESIKO3_DIR}src\cnako3.mjs"」
BAT=「{テンポラリフォルダ}npm_cmd_{99999の乱数}.bat」
# ------------------------------------------------------
20,20へ移動
文字サイズ＝24
『日本語プログラミング言語「なでしこ3」』と表示。
20,80へ移動
# ------------------------------------------------------
文字サイズ＝12
「基本:」を表示
# ------------------------------------------------------
WEB版起動とはボタン
そのW=300
そのテキスト＝「なでしこ３のWeb版を実行」
そのクリックした時は〜
　　#SVR=「{NADESIKO3_DIR}tools\nako3server\index.mjs」
　　#「"{NODE_EXE}" "{SVR}"」を起動。
　　「"{BASEDIR}bin\nako3server.bat"」を起動

# ------------------------------------------------------
PC版起動とはボタン
そのW=300
そのテキスト＝「なでしこ３のPC版(Node.jsランタイム)を実行」
そのクリックした時は〜
　　#SVR=「{NADESIKO3_DIR}tools\nako3edit\index.mjs」
　　#「"{NODE_EXE}" "{SVR}"」を起動。
　　「"{BASEDIR}bin\nako3edit.bat"」を起動


# ------------------------------------------------------
「」を表示。
「拡張:」を表示
# ------------------------------------------------------
プラグイン起動とはボタン
そのW=300
そのテキスト＝「拡張プラグインのインストール」
そのクリックした時は〜
　　「モジュールの一覧を表示しますか？」と二択。
　　もし、それがはいならば
　　　　「https://www.npmjs.com/search?q=nadesiko3-」を起動。
　　「モジュール名を入力してください」と尋ねる。
　　もし、それが空ならば
　　　　終わる
　　MNAME＝それ
　　CMD=「
cd "{BASEDIR}"
"{NODE_DIR}npm" install "{MNAME}"
」
　　CMDをBATに保存。
　　BATを起動。
# ------------------------------------------------------
最新版更新とはボタン
そのW=300
そのテキスト＝「なでしこ3 最新版をインストール」
そのクリックした時は〜
　　「{SETUP_DIR}update-new-version.bat」を起動。
# ------------------------------------------------------
PowerShell起動とはボタン
そのW=300
そのテキスト＝「Windows PowerShellを起動」
そのクリックした時は〜
　　「powershell」を起動。

# ------------------------------------------------------
# 初期セットアップ
# ------------------------------------------------------
もし、(NODE_EXEが存在)ならば
　　# インストールされている
違えば
　　# setup\nodejs.7z を解凍する
　　「これから、なでしこ3の初期化処理を開始します。{改行}」＆
　　「よろしければ、[はい]ボタン を押してください。」と二択。
　　もし、それがいいえならば、終わる。
　　「"{ZIP_EXE}" x -y "{SETUP_DIR}nodejs.7z" -o"{BASEDIR}"」を起動待機。
　　「"{ZIP_EXE}" x -y "{SETUP_DIR}node_modules.7z" -o"{BASEDIR}"」を起動待機。
# ------------------------------------------------------


