!function(){"use strict";require("whatwg-fetch");const e=require("./nako3"),r=require("./plugin_browser_in_worker"),a=require("./plugin_worker");class t extends e{constructor(){super(),this.__varslist[0]["ナデシコ種類"]="wwnako3",this.__varslist[0]["PluginWorker:ondata"]=(e,r)=>{throw new Error("『NAKOワーカーデータ受信時』が呼ばれていません。")}}}if("object"==typeof navigator&&self&&self instanceof WorkerGlobalScope){const e=navigator.nako3=new t;let n=e;e.addPluginObject("PluginBrowserInWorker",r),e.addPluginObject("PluginWorker",a),e.logger.addListener("error",(function(e){self.postMessage({type:"error",data:e})}),!1),self.onmessage=r=>{const a=r.data||{type:"",data:""},t=a.type||"",s=a.data||"";switch(t){case"reset":e.reset();break;case"close":self.close();break;case"run":n=n.runEx(s,"_webworker.nako3",{resetEnv:!1,resetLog:!1});break;case"trans":s.forEach((r=>{"func"===r.type?(e.nako_func[r.name]=r.content.meta,e.funclist[r.name]=r.content.func,e.__varslist[1][r.name]=()=>{}):"val"===r.type&&(e.__varslist[2][r.name]=r.content)}));break;case"data":n.__varslist[0]["PluginWorker:ondata"]&&n.__varslist[0]["PluginWorker:ondata"].apply(n,[s,r])}}}}();